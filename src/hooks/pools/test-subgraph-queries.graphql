# Test queries for PlanetSwap V2+V3 Subgraph
# These queries match our schema exactly

# V2 Pairs Query (already correct)
query getV2Pairs($first: Int!, $orderBy: String!, $orderDirection: String!) {
  pairs(first: $first, orderBy: $orderBy, orderDirection: $orderDirection) {
    id
    token0 {
      id
      symbol
      name
      decimals
    }
    token1 {
      id
      symbol
      name
      decimals
    }
    reserve0
    reserve1
    reserveUSD
    volumeUSD
    txCount
    totalSupply
    createdAtTimestamp
    createdAtBlockNumber
  }
}

# V3 Pools Query (updated to use v3Pools)
query getV3Pools($first: Int!, $orderBy: String!, $orderDirection: String!) {
  v3Pools(first: $first, orderBy: $orderBy, orderDirection: $orderDirection) {
    id
    token0 {
      id
      symbol
      name
      decimals
    }
    token1 {
      id
      symbol
      name
      decimals
    }
    feeTier
    sqrtPrice
    tick
    liquidity
    totalValueLockedUSD
    volumeUSD
    txCount
    createdAtTimestamp
    createdAtBlockNumber
  }
}

# Combined Pool Data Query
query getAllPools($first: Int!) {
  # V2 Pairs
  pairs(first: $first, orderBy: volumeUSD, orderDirection: desc) {
    id
    name
    token0 { symbol name }
    token1 { symbol name }
    reserveUSD
    volumeUSD
    txCount: totalTransactions
    type: "V2"
  }
  
  # V3 Pools  
  v3Pools(first: $first, orderBy: totalValueLockedUSD, orderDirection: desc) {
    id
    token0 { symbol name }
    token1 { symbol name }
    totalValueLockedUSD
    volumeUSD
    txCount
    feeTier
    type: "V3"
  }
}

# Factory Stats
query getFactoryStats {
  # V2 Factory
  planetFactory(id: "0x5d94f4c717f3d69a837dfc36d91e1a87b8f1ae40") {
    id
    totalPairs
    totalTransactions
    totalVolumeUSD
    totalLiquidityUSD
  }
  
  # V3 Factory
  v3Factory(id: "0x7e4fe502ee78ab7728b00b3bd7fd182a4b17c45f") {
    id
    poolCount
    txCount
    totalVolumeUSD
    totalValueLockedUSD
  }
  
  # Price Bundle
  bundle(id: "1") {
    id
    okbPrice
  }
}
